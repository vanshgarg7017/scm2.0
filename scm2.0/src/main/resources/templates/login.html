<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <!-- Tailwind CSS for styling -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(9,121,121,1) 35%, rgba(0,212,255,1) 100%);
        }
    </style>
</head>
<body class="gradient-bg">
    <div id="content" class="flex justify-center items-center min-h-screen">
      <div class="w-full max-w-md p-8 bg-white rounded-xl shadow-lg dark:bg-gray-800">
        
        <!-- Message box for login status -->
        <div th:replace="fragments/message :: messagebox"></div>

        <!-- Login Title -->
        <h2 class="mb-6 text-3xl font-bold text-gray-900 dark:text-white text-center">
          Login Here
        </h2>
        <p class="text-center text-gray-500 dark:text-gray-400 mb-4">
          Start managing your contacts on the cloud.
        </p>

        <!-- Error and Success Messages -->
        <div th:if="${param.error}" class="text-red-600 text-center my-3">
          Invalid username or password.
        </div>
        <div th:if="${param.logout}" class="text-green-600 text-center my-3">
          You have been logged out successfully.
        </div>

        <!-- Login Form -->
        <form method="post" th:action="@{/authenticate}" class="mt-5">
          
          <!-- Email Field -->
          <div class="mb-4">
            <label for="email" class="block text-sm font-medium text-gray-900 dark:text-white">
              Email
            </label>
            <input
              name="username" 
              type="email" 
              id="email" 
              class="w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              placeholder="name@domain.com"
              required
            />
          </div>

          <!-- Password Field -->
          <div class="mb-4">
            <label for="password" class="block text-sm font-medium text-gray-900 dark:text-white">
              Password
            </label>
            <input
              name="password" 
              type="password" 
              id="password" 
              class="w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
              placeholder="••••••••"
              required
            />
          </div>

          <!-- Buttons (Login and Reset) -->
          <div class="flex justify-between items-center">
            <button
              type="submit"
              class="px-4 py-2 w-1/2 mr-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg focus:outline-none"
            >
              Login
            </button>
            <button
              type="reset"
              class="px-4 py-2 w-1/2 ml-2 text-white bg-gray-600 hover:bg-gray-700 rounded-lg focus:outline-none"
            >
              Reset
            </button>
          </div>
        </form>

        <!-- Social Login Buttons -->
        <div class="flex flex-col items-center mt-6 space-y-3">
          <!-- Google Sign-In -->
          <a th:href="@{/oauth2/authorization/google}"
            class="px-4 py-2 w-full text-center text-white font-semibold bg-red-500 hover:bg-red-600 rounded-lg">
            Sign in with Google
          </a>

          <!-- GitHub Sign-In -->
          <a th:href="@{/oauth2/authorization/github}" 
            class="px-4 py-2 w-full text-center text-white font-semibold bg-gray-700 hover:bg-gray-800 rounded-lg flex justify-center items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="mr-2" viewBox="0 0 1792 1792">
              <path d="M896 128q209 0...z"></path>
            </svg>
            Sign in with GitHub
          </a>
        </div>
      </div>
    </div>
    <script>
      console.log("Login page loaded");
    </script>
</body>
</html>
